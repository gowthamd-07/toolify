{% extends 'base.html' %}

{% block title %}PNG to JPG Convertor{% endblock title %}

{% block content %}
<section class='qr-code-generator container'>
  <div class='yt-video-downloader-content'>
    <form class='text-tools-form' method="post" enctype="multipart/form-data">
  <h1>PNG to JPG Convertor</h1>
  {% csrf_token %}
  <div id="drop-area">
    <div class="drop-instructions"><b><i class="bi bi-upload"></i></b>&nbsp&nbspclick to select a PNG image</div>
    <input id="file-input" type="file" name="image" accept="image/png" required>
  </div>
  <span class='fileLine' style='display: none; margin-top: 1rem;'><b>Selected file:</b> <span class='file-name'></span></span>
  <center><input style='margin-top: 1rem;' type="submit" value="Convert & Download"></center>
</form>
</div>
</section>
<script>
  const dropArea = document.getElementById('drop-area');
  const FileInput = document.getElementById('file-input');
  const fileName = document.querySelector('.file-name');
  const fileLine = document.querySelector('.fileLine');
  
  FileInput.addEventListener('change', function() {
    fileName.innerHTML = this.files[0].name;
    fileLine.style.display='block'
  });  

// Handle dropped file
dropArea.addEventListener('drop', handleDrop, false);

// Open file dialog when drop area is clicked
dropArea.addEventListener('click', openFileInput, false);

function handleDrop(e) {
  const files = e.dataTransfer.files;
  handleFiles(files);
}

function openFileInput() {
  document.getElementById('file-input').click();
}


</script>
{% endblock %}